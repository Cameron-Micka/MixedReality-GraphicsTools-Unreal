// Copyright (c) Microsoft Corporation.
// Licensed under the MIT License.

#ifndef GT_CLIPPING
#define GT_CLIPPING

#include "GTCommon.ush"

float GTPointVsPlane(float3 worldPosition, float4 plane, float clippingSide)
{
    float3 planePosition = plane.xyz * plane.w;
    return dot(worldPosition - planePosition, plane.xyz) * clippingSide;
}

float GTPointVsSphere(float3 worldPosition, float4x4 sphereInverseTransform, float clippingSide)
{
    return (length(mul(sphereInverseTransform, float4(worldPosition, 1.0)).xyz) - 0.5) * clippingSide;
}

float GTPointVsBox(float3 worldPosition, float4x4 boxInverseTransform, float clippingSide)
{
    float3 distance = abs(mul(boxInverseTransform, float4(worldPosition, 1.0))) - 0.5;
    return length(max(distance, 0.0)) + min(max(distance.x, max(distance.y, distance.z)), 0.0) * clippingSide;
}

#endif // GT_CLIPPING